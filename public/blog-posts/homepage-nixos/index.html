<!DOCTYPE html>
<html><head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <title>Setting up a Homepage for my HomeLab on my personal NixOS machine - Simse´s Lab</title>

    
    
    <meta name="description" content="Setting up a Homepage for my HomeLab on my personal NixOS machine What is this Homepage you speak of? When homelab&rsquo;ing, you often end up with a bunch of different selfhosted(info) services and URLs you need to keep track of and visit repeatedly. Using bookmarks or shortcuts to access all of your stuff is fine, but can end up becoming a bit inconvenient as your homelab grows. Using a nice front for accessing your services, like Heimdall or Homepage, can be really nice to quickly navigate to where you want to go, with big visible icons instead of plain text labels, or small unrecognizable icons." />
    <meta name="author" content="" />
    

    <link href="https://unpkg.com/@master/normal.css" rel="stylesheet">
    <script src="https://unpkg.com/@master/style@1.5.0"></script>
    <script src="https://unpkg.com/@master/styles@1.13.0"></script>
    <script src="https://unpkg.com/master-styles-group"></script>
    <script src="https://unpkg.com/themes.js"></script>
    <script>window.themes = window.themes || new window.Themes()</script>

    <style>
        :root {
            --font-sans: "Inter var", ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
        }
    </style></head>
<body class="bg:fade-84@dark font:fade-16@dark font:sans">
    <nav class="w:full h:90 fixed bg:fade-84/.95@dark bg:white z:1000">
    <div class="
        h:full
        w:full
        max-w:1200
        mx:auto
        px:32
        d:flex
        align-items:center
    ">
        <div>
            <a href="/" class="mr-3 font:extralight">
              
              Simse´s Lab
              
            </a>
        </div>

        <div class="ml:auto">
            
            
            
        </div>
    </div>
</nav>
<div class="d:flex flex:column@<=sm pt:90 px:24 jc:center gap:44 word-break:break-word">
        <div class="max-w:700 w:full box:content-box">
<article class="box:border-box pt:32">
    <header class="mb:32">
        <div class="font:40 font:extrabold">Setting up a Homepage for my HomeLab on my personal NixOS machine</div>
        <div class="mt:16 f:fade-60">
            <time>Mar 22, 2024</time>
            </div>
    </header><div class="
    _:where(a):hover{text-decoration-color:fade}
    _:where(a){text-decoration:2;underline;fade-10;_text-decoration-color:fade-70@dark}
    _:where(blockquote){bl:5;solid;fade-76/.1;_bl:5;solid;fade-34/.1@dark}
    _:where(code){font:90%;_v:middle}
    _:where(code:not(.highlight_*,pre_*)){p:2;6;_r:4}
    _:where(del){text-decoration:1;line-through;fade-68;_text-decoration-color:red-64@dark}
    _:where(figcaption){text:14;_p:10;20;0;_width:fit;_mx:auto;_font:fade-56;_font:fade-57@dark}
    _:where(h1){font:40;_font:extrabold}
    _:where(h1,h2,h3)+:where(h1,h2,h3){mt:.5em}
    _:where(h1,h2,h3,h4,h5,h6){mt:2em}
    _:where(h2){mb:1em;_font:32}
    _:where(h3){font:24}
    _:where(h4){font:20}
    _:where(h5){font:16}
    _:where(h6){font:14}
    _:where(li)::marker{font:fade-44;_font:fade-68@dark}
    _:where(li){pl:.375em}
    _:where(mark){text-decoration:1;underline;#fce016;_bg:transparent;_text-decoration-color:rgb(252;224;22/.5)@dark}
    _:where(p,li){font:fade-76;_font:16;_line-height:1.65;_font:fade-34@dark}
    _:where(p,pre,blockquote,figure,ul,ol,table){my:1.125em}
    >:first-child{mt:0!}
    _:where(pre){p:20;_r:8;_overflow:auto}
    _:where(pre,code:not(.highlight_*)){bg:fade-2;_bg:fade-92!@dark}
    _:where(strong,b,a,code:not(.highlight_*),mark,del){font:fade-92;_font:fade-12@dark}
    _:where(table){width:full;_border-spacing:0}
    _:where(td){v:baseline}
    _:where(td,th):first-child{pl:0}
    _:where(td,th):last-child{pr:0}
    _:where(td,th){bb:1;solid;fade-92/.06;_p:6;_b:fade-4/.04@dark}
    _:where(th){font:fade-78;_font:14;_text:left;_font:fade-12@dark}
    _:where(th,p_code,li_code,a,mark){font:semibold;_font:medium@dark}
    _:where(ul){list-style-type:disc}
    _:where(ul,ol,blockquote){pl:1.5em}
    _:where(video,img){max-width:full}
    _:where(a,mark){text-underline-offset:3}
    _:where(hr){h:2;_bg:fade-10;_bg:fade-70@dark;_my:3em}
"><h1 id="setting-up-a-homepage-for-my-homelab-on-my-personal-nixos-machine">Setting up a Homepage for my HomeLab on my personal NixOS machine</h1>
<h2 id="what-is-this-homepage-you-speak-of"><em>What is this Homepage you speak of?</em></h2>
<p>When <a href="https://linuxhandbook.com/homelab/">homelab&rsquo;ing</a>, you often end up with a bunch of different selfhosted(info) services and URLs you need to keep track of and visit repeatedly. Using bookmarks or shortcuts to access all of your stuff is fine, but can end up becoming a bit inconvenient as your homelab grows. Using a nice front for accessing your services, like <a href="https://heimdall.site/">Heimdall</a> or <a href="https://github.com/gethomepage/homepage">Homepage</a>, can be really nice to quickly navigate to where you want to go, with big visible icons instead of plain text labels, or small unrecognizable icons. What&rsquo;s cool, is that these dashboards often have extra stuff included, that can incorporate with your services, and give quick information directly in the dashboard, before even clicking on them. Really nice, especially if the reason to visit the site was to lookup said information.</p>
<h3 id="heimdall-or-homepage">Heimdall or Homepage?</h3>
<p>I originally used Heimdall, but was never really to pleased with it. Heimdall is configure via its nice UI, and you set up each app/service with a nice visual interface. However, I really like having everything configured through configuration files, because it gives me both a history over what I have configured, by simply reading the file, but also a natural way to backup my personal dashboard layout. If the container hosting Heimdall goes down and needs to be reconfigured, then I would have to setup each and every service once again, with potential Icons, colours and API keys. Not a fan.
After a lot of coverage from different YouTubers like <a href="https://www.youtube.com/@technotim">Techno Tim</a>, <a href="https://www.youtube.com/@christianlempa">Christian Lempa</a> and <a href="https://www.youtube.com/@DBTechYT">DB Tech</a> I jumped to Homepage, because it solved my issue with configuration, and - in my opinion - has a more pleasing look. Simple as that, because they both do their job really well, and the main difference is mostly the userbase. If you don&rsquo;t like to use configuration files, Homepage would be a chore and Heimdall would likely be a better match.</p>
<h2 id="if-you-are-hosting-other-stuff-then-why-put-your-homepage-on-a-your-local-machine"><em>If you are hosting other stuff, then why put your homepage on a your local machine?</em></h2>
<p>I have hosted these dashboards on my server before, and tried to use <em>easy to remember hostnames</em> for my services. But, when something breaks in the network chain, I often ended up not having access to my dashboard, and then not having my quick route to fix the issue. And because of my easy to remember hostnames, I ended up forgetting the IP addresses and ports for the services, further slowing down my troubleshooting. It has only happened a couple of times, but was still really annoying each time. Having my dashboard on my local machine, served via <code>localhost:&lt;port&gt;</code>, means if the homepage is down, I know it&rsquo;s an local issue with my specific machine. And if a greater network issue occurres, I still have the route to the different servers, my router and switch, and can read the IP and port of the specific service by hovering over it in the dashboard.</p>
<h2 id="some-issues-i-had-with-docker-oci-containers-and-nixos">Some issues I had with Docker, OCI-containers and NixOS</h2>
<p>For some reason when using the docker backend with oci systemd containers, the shutdown process of my pc would hang
A job for. .. xx/1.30min</p>
<p>I fixed it with using Podman for the backend instead, although I ended up with some ping issues, which I fixed with</p>
<p><code>--net=host</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nix" data-lang="nix"><span style="display:flex;"><span>{ config<span style="color:#f92672">,</span> pkgs<span style="color:#f92672">,</span> <span style="color:#f92672">...</span> }:
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  virtualisation <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>      podman <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        enable <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Create a &#39;docker&#39; alias for podman, to use it as a drop-in replacement</span>
</span></span><span style="display:flex;"><span>        dockerCompat <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>      };
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  virtualisation<span style="color:#f92672">.</span>oci-containers <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    backend <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;podman&#34;</span>;
</span></span><span style="display:flex;"><span>    containers <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>      Homepage <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        autoStart <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>        image <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ghcr.io/gethomepage/homepage:latest&#34;</span>;
</span></span><span style="display:flex;"><span>        hostname <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Homepage&#34;</span>;
</span></span><span style="display:flex;"><span>        extraOptions <span style="color:#f92672">=</span> [ <span style="color:#e6db74">&#34;--net=host&#34;</span> ];
</span></span><span style="display:flex;"><span>        ports <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74">&#34;3000:3000&#34;</span>
</span></span><span style="display:flex;"><span>        ];
</span></span><span style="display:flex;"><span>        volumes <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74">&#34;/home/user/.dotfiles/Homepage-startpage/config:/app/config&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74">&#34;/home/user/.dotfiles/Homepage-startpage/Graphics/icons:/app/public/icons&#34;</span>
</span></span><span style="display:flex;"><span>        ];
</span></span><span style="display:flex;"><span>        environment <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>          PUID <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1000&#34;</span>;
</span></span><span style="display:flex;"><span>          PGID <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1000&#34;</span>;
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>      };
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Podman safer rootless</p>
</div></article>
<footer class="py:24">
    <div class="f:fade-30 f:14 mb:8"></div>
    <div class="f:fade-60 f:12">Theme <a class="f:bold" href="https://github.com/serkodev/holy" _target="_blank">Holy</a></div>
</footer></div>
    </div>
</body>

</html>